## **타입스크립트 설치하기**

* 편집기에서 제공하는 물결선이 만능 해결사는 아니다. 명령줄 피드백, 상태 코드, 설정, 자바스크립트 형식 확인과 타입스크립트 컴파일 옵션 등이 필요하다.

* 해결: 노드(Node)의 주요 패키지 등록 장소인 NPM(https://npmjs.com)에서 타입스크립트를 설치한다.

타입스크립트로 구현된 코드는 자바스크립트로 컴파일한 다음 자바스크립트 런타임(https://nodejs.org)인 Node.js를 주요 실행 환경으로 운영한다.
Node.js 앱을 구현하는 상황이 아니더라도 자바스크립트 애플리케이션의 도구는 노드에서 실행된다.
따라서 노드 공식 웹사이트(https://nodejs.org)에서 Node.js를 내려받아 명령행 도구에 익숙해지도록 노력하자.

새 프로젝트를 만들려면 프로젝트 폴더를 새로운 package.json으로 초기화해야 한다.
이 파일은 노드와 노드의 패키지 관리자 NPM이 프로젝트의 컨텐츠를 이해하는 데 필요한 모든 정보를 포함한다.
다음처럼 NPM 명령행 도구로 프로젝트 폴더에 기본적인 package.json 파일을 만든다.

```
$ npm init -y
```

NPM은 노드의 패키지 관리자이다.
NPM은 CLI, 레지스터리, 의존성을 설치하는 데 필요한 다양한 도구를 포함한다.
package.json을 설치했다면 NPM으로 타입스크립트를 설치한다. 예제에서는 타입스크립트를 개발 의존성으로 추가하는데, 이는 프로젝트를 NPM의 
라이브러리로 배포할 때 타입스크립트를 포함하지 않는다는 의미이다.

```
$ npm install -D typescript
```

타입스크립트를 전역으로 설치하면 매번 타입스크립트 컴파일러를 설치할 필요가 없다.
하지만 프로젝트별 타입스크립트를 설치하기를 바란다.
프로젝트를 얼마나 자주 갱신하느냐에 따라 프로젝트 코드가 사용하는 타입스크립트 버전이 달라질 수 있다.
타입스크립트를 전역으로 설치하거나 업데이트한다면 기존 프로젝트의 코드가 동작하지 않을 수 있다.

타입스크립트를 설치했고, 새 타입스크립트 프로젝트도 초기화했다.
NPX는 프로젝트의 상대 경로에 설치된 명령형 유틸리티를 실행하게 해 주는 도구이다.
다음처럼 NPX를 사용한다.

```
$ npx tsc --init
```

프로젝트의 지역 버전 타입스크립트 컴파일러를 실행하면서 새 tsconfig.json을 만들도록 init 플래그를 전달한다.

tsconfig.json은 타입스크립트 프로젝트의 핵심 설정 파일이다.
타입스크립트가 코드를 어떻게 해석하고, 어떻게 의존성에 형식을 제공하며, 어떤 기능을 켜고 끌지를 이 파일로 설정한다.

다음은 타입스크립트가 기본으로 설정하는 옵션이다.

```
{
    "compilerOptions": {
        "target": "es2016",
        "module": "commonjs",
        "esModuleInterop": true,
        "forceConsistentCasinfInFIleNames": true,
        "strict": true,
        "skipLibCheck": true
    }
}
```

이 파일을 자세히 살펴보자.

target은 es2016으로, 프로젝트의 타입스크립트 파일을 ECMAScript 2016 문법(ECMAScript 배포 연도를 ECMAScript 버전으로 사용함)으로 컴파일한다.
현재 사용하는 브라우저나 작업 환경에 따라 더 최신 버전이나 es5 같은 예전 버전을 target을 설정할 수 있다.
module은 commonjs다. 이 옵션을 이용하면 ECMAScript 모듈 문법을 사용할 수 있다. 하지만 이 문법을 출력으로 전달하는 방식이 아니라 타입스크립트가 모듈 문법을 CommonJS 형식으로 컴파일한다. 다음과 같은 코드가 있다고 가정하자.

```
import { name } from "./my-module";

console.log(name);
//...
```

이 코드를 컴파일하면 다음처럼 바뀐다.

```
const my_module_1 = require("./my-module");
console.log(my_module_1.name);
```

CommonJS는 Node.js의 모듈 시스템인데 노드가 인기를 끄는 동시에 유명해졌다.
Node.js는 ECMAScript 모듈도 지원하는데 이는 1.9 절에서 살펴보겠다.

esModuleInterop은 ECMAScript 모듈 이외의 임포트된 모듈들의 펴준을 일치시킨다.
forceConsistentCasingInFileNames는 대소문자를 구별하는 파일 시스템 지원하는 옵션이다.
skipLibCheck는 오류가 없는 형식 정의 파일(뒤에서 자세히 설명함)들을 설치했다고 가정한다.
따라서 컴파일러가 형식 정의 파일을 다시 검사하지 않으므로 컴파일러 동작 속도를 조금 높일 수 있다.

가장 흥미로운 기능은 엄격(strict) 모드이다.
이 옵션을 true로 하면 타입스크립트가 일부 영역에서 조금 다르게 동작한다.
타입스크립트 팀은 이를 이용해 자신들의 형식 시스템이 어떤 모습이어야 할지를 정의한다.

형식 시스템의 뷰가 바뀌면서 타입스크립트가 이전 코드와 호환되지 않는 새 기능을 추가하는 상황이라면 엄격 모드로 추가된다.
즉, 타입스크립트를 업데이트하면서 엄격 모드를 적용한다면 어느 순간 코드는 동작하지 않을 수도 있다.

이러한 변화를 적용할 시간이 필요함을 감안해 타입스크립트는 엄격 모드 안에서 기능별로 엄격 모드를 켜거나 끌 수 있도록 허용한다.

기본 설정 외에 다음 두 가지 설정을 추가하기를 권장한다.

```
{
    "compileOptions": {
        //...
        "rootDir": "./src",
        "outDir": "./dist"
    }
}
```

이 설정은 타입스크립트가 src 폴더에서 소스 파일을 수집하고 컴파일된 파일을 dist 폴더에 저장하도록 지시한다.
이 설정을 이용하면 구현 코드와 빌드된 파일을 다른 장소에 분리 저장할 수 있다.
src 폴더는 직접 만들어야 하지만 dist 폴더는 컴파일 시 자동으로 만들어진다.

이제 설정이 끝났다. 프로젝트 설정을 마쳤으므로 src 폴더 다음 내용을 포함하는 index.ts 파일을 만들어보자.

```
console.log("Hello World");
```

터미널에서 이 명령을 실행하면서 컴파일러가 제대로 동작하는지 확인한다.