## **OpenAPI는 언제 사용하는가?**

항상.
물론 다른 모든 기술과 마찬가지로 OpenAPI 역시 항상 사용할 필요는 없다. OpenAPI는 RESTful API를 포하하는 HTTP API를 기술하는 데 사용되므로,
HTTP API를 설계하고 관리하고 사용할 때 OpenAPI를 사용하면 충분히 효과를 볼 수 있다.

예컨대, gRPC나 GraphQL처럼 HTTP 메서드, URL, 헤더, 본문 같은 HTTP 문법을 사용하지 않는 API를 다룰 때는 OpenAPI 적용을 통해 얻을 수 있는 효과는 제한적이다. 이번 절에서 사용하려는 API라는 용어는 HTTP API를 가리킨다.

### **API 사용자**

API를 사용해야 한다면 본능적으로 가장 먼저 찾아보는 것은 사용하는 프로그래밍 언어로 구성된 SDK이다.
널리 사용되는 API는 많은 공을 들여 SDK를 만들어서 사용자에게 제공한다. 하지만 어떤 API는 인력 부족으로 다수의 언어에 대한 SDK를 만들지 못할 수도 있다.
이런 상황에서 API가 API 제공자나 API 사용자에 의한 OpenAPI로 기술되어 있다면 여러 언어로 SDK를 자동으로 만들어 낼 수 있다.
스웨거 코드젠(Swagger Codegen)이나 OpenAPI 제네레이터(OpenAPI generator)같은 도구가 제공하는 SDK 템플릿은 클라이언트를 만드는 출발점으로 충분하다. 템플릿을 필요에 맞게 커스터마이징하면 OpenAPI로 기술된 API를 다룰 때 훨씬 더 위력을 발휘할 수 있다.

### **API 제공자**

APi를 만드는 일은 꽤 재미있다. 특히 API에 사용될 계약이 정해져 있다면 더욱 재미있다.
하지만 API를 제공할 HTTP 서버를 만드는 일에는 많은 준비 코드가 필요하므로 그다지 즐겁지 않다.
OpenAPI 정의서를 사용해 준비 코드와 스텁을 자동으로 생성할 수 있다면 필요에 맞게 템플릿을 커스터마이징해서 생산성과 일관성을 높일 수 있다.

더 흥미로운 방식으로 API를 개발할 수도 있다. 런타임에 OpenAPI 정의서를 사용해 API 연산과 클래스 및 메서드를 매핑하는 라우터로 사용할 수도 있고,
입력값이 OpenAPI 정의서의 스키마에 부합하는지 확인하는 검증(Validation) 계층으로 사용할 수도 있다. 이런 방식은 작은 서비스를 빠른 속도로 만들고 출시하는 마이크로서비스 지향 아키텍쳐에서 점점 더 많이 사용되고 있다.

### **API 설계자**

API 설계는 최근에 더욱 많은 관심을 끌고 있으며 그 중요성은 아무리 강조해도 지나치지 않다.
짧은 피드백 주기와 이른 실패(failing fast)를 강조하는 애자일 방식을 열렬히 지지하는 입장이지만, API 설계는 오랫동안 사용되어야 한다는 점에 염두에 두고 진행돼야 한다. 왜냐하면 API 변경은 API 설계자의 통제 범위 밖에 존재하는 API 사용자에게도 변경을 유발하기 때문이다.
OpenAPI는 API 제공자와 사용자 사이에서 둘의 의사소통을 도와주는 매체 역할을 한다. API 설계자는 이른 시기에 피드백을 받을 수 있고 이를 토대로 반복적으로 설계를 개선할 수 있다.

하나 이상의 API를 관리할 때는 API 설계는 더욱 흥미로워진다. 이런 상황에서는 일관성이 중요한 역할을 한다.
API의 패턴을 파악하면 모든 API를 일관성 있는 패턴으로 표준화할 수 있다.
API 패턴을 파악하는 데 OpenAPI 정의서를 사용할 수 있다.